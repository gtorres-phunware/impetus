!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.3,i=.04,u=.11,r=function d(e){function t(){M.call(g,Q,W)}function r(e){k.call(g,O)}function s(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function c(e){O="start",k&&r();var t=s(e);_||ee||(_=!0,te=!1,H=t.id,z=j=t.x,C=G=t.y,ne=[],l(z,C),document.addEventListener("touchmove",f),document.addEventListener("touchend",v),document.addEventListener("touchcancel",m),document.addEventListener("mousemove",f),document.addEventListener("mouseup",v))}function f(e){e.preventDefault();var t=s(e);O="update",k&&r(),_&&t.id===H&&(j=t.x,G=t.y,l(z,C),N||oe.push({x:j,y:G}),!N&&oe.length<=ie?oe.length==ie&&h():Y?Y==N&&(e.stopImmediatePropagation(),x()):x())}function v(e){O="end",k&&r();var t=s(e);_&&t.id===H&&(m(),N=null,oe=[])}function m(){_=!1,l(z,C),E(),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",v),document.removeEventListener("touchcancel",m),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",f)}function l(e,t){for(var n=Date.now();ne.length>0&&!(n-ne[0].time<=100);)ne.shift();ne.push({x:e,y:t,time:n})}function h(){var e=oe[0],t=oe[oe.length-1],n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);N=n>o?"x":"y"}function p(){var e=j-z,n=G-C;if(Q+=e*q,W+=n*q,X){var o=w();0!==o.x&&(Q-=e*y(o.x)*q),0!==o.y&&(W-=n*y(o.y)*q)}else w(!0);t(),z=j,C=G,$=!1}function y(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function x(){$||a(p),$=!0}function w(e){var t=0,n=0;return void 0!==D&&D>Q?t=D-Q:void 0!==R&&Q>R&&(t=R-Q),void 0!==U&&U>W?n=U-W:void 0!==V&&W>V&&(n=V-W),e&&(0!==t&&(Q=t>0?D:R),0!==n&&(W=n>0?U:V)),{x:t,y:n,inBounds:0===t&&0===n}}function E(){var e=ne[0],t=ne[ne.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/q;J=n/u||0,K=o/u||0;var r=w();(Math.abs(J)>1||Math.abs(K)>1||!r.inBounds)&&(te=!0,a(b))}function b(){if(te){O="fading",k&&r(),J*=I,K*=I,Q+=J,W+=K;var e=w();if(Math.abs(J)>Z||Math.abs(K)>Z||!e.inBounds){if(X){var n=2.5;if(0!==e.x)if(e.x*J<=0)J+=e.x*i;else{var o=e.x>0?n:-n;J=(e.x+o)*u}if(0!==e.y)if(e.y*K<=0)K+=e.y*i;else{var o=e.y>0?n:-n;K=(e.y+o)*u}}else 0!==e.x&&(Q=e.x>0?D:R,J=0),0!==e.y&&(W=e.y>0?U:V,K=0);t(),a(b)}else O="faded",k&&r(),te=!1}}var L=e.source,g=void 0===L?document:L,M=e.update,T=e.multiplier,q=void 0===T?1:T,A=e.friction,I=void 0===A?.92:A,B=e.initialValues,F=e.boundX,P=e.boundY,S=e.bounce,X=void 0===S?!0:S,Y=e.lockAxis,k=e.changed;n(this,d);var D,R,U,V,z,C,j,G,H,J,K,N,O,Q=0,W=0,Z=o*q,$=!1,_=!1,ee=!1,te=!1,ne=[],oe=[],ie=3;!function(){if(g="string"==typeof g?document.querySelector(g):g,!g)throw new Error("IMPETUS: source not found.");if(!M)throw new Error("IMPETUS: update function not defined.");B&&(B[0]&&(Q=B[0]),B[1]&&(W=B[1]),t()),F&&(D=F[0],R=F[1]),P&&(U=P[0],V=P[1]),g.addEventListener("touchstart",c),g.addEventListener("mousedown",c)}(),this.pause=function(){_=!1,ee=!0},this.resume=function(){ee=!1},this.setValues=function(e,t){"number"==typeof e&&(Q=e),"number"==typeof t&&(W=t)},this.setMultiplier=function(e){q=e,Z=o*q}};t.exports=r;var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});